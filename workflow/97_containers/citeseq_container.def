Bootstrap: docker
From: python:3.11-slim

%labels
    Author BSSantos
    Version 1.0
    Description Container with Python 3.11, pandas, and biopython for antibody barcode alignment

%help
    This container provides Python 3.11 with pandas and biopython for sequence alignment tasks.
    
    Usage:
        singularity exec python_alignment.sif python3 script.py
    
    Installed packages:
        - Python 3.11
        - pandas
        - biopython

%post
    # Update package lists
    apt-get update
    
    # Install any additional system dependencies if needed
    apt-get install -y --no-install-recommends \
        gcc \
        g++ \
        make
    
    # Upgrade pip
    pip install --no-cache-dir --upgrade pip setuptools wheel
    
    # Install Python packages
    pip install --no-cache-dir \
        pandas>=1.5.0 \
        biopython>=1.80
    
    # Clean up to reduce image size
    apt-get clean
    rm -rf /var/lib/apt/lists/*
    
    echo "Container build complete!"
    echo "Python version:"
    python3 --version
    echo "Installed packages:"
    pip list

%environment
    export LC_ALL=C
    export PATH=/usr/local/bin:$PATH

%runscript
    echo "Python alignment container"
    echo "Python version: $(python3 --version)"
    exec python3 "$@"
